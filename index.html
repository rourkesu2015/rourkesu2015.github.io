<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
		body{
			height: 5000px;
		}
		#div1{
			position: absolute;
			top: 2000px;
			width: 100%;
			height: 500px;
			border:1px solid red;
		}
		#div2{
			position: absolute;
			top: 3000px;
			height: 500px;
			border: 1px solid red;
		}
		img{
			width: 500px;
			height: 500px;
		}
	</style>
	<body>
		<div id="div1">
			<img src="" _src = "img/1.jpg"/>
		</div>
		<div id="div2">
			<img src="" _src = "img/2.jpg"/>
		</div>
	</body>
	<script type="text/javascript">
		var div1 = document.getElementById("div1");
		var div2 = document.getElementById("div2");
		
		function offSet(elem){
			var l = 0;
			var t = 0;
			while(elem){
				l += elem.offsetLeft;
				t +=elem.offsetTop;
				elem = elem.offsetParent;
			}
			//json
			return {top:t,left:l};
		}
		
		window.onscroll = function(){
			//body向上滚动的数值
			console.log("aaa"+document.body.scrollTop);
			//标签内子元素到上方的高度
			console.log("bbb"+offSet(div1.firstElementChild).top);
			//可视窗口的高度
			console.log("ccc"+document.documentElement.clientHeight);
			
			var a = document.body.scrollTop;
			var b = offSet(div1.firstElementChild).top;
			var c = document.documentElement.clientHeight;
			//如果到达临界值
			if(a + c >=b){
				var img =div1.firstElementChild;
				img.src = img.getAttribute("_src");
				
			}
			var d = offSet(div2.firstElementChild).top;
			if(a + c >=d){
				var img =div2.firstElementChild;
				img.src = img.getAttribute("_src");
				
			}
		
			
		}
	</script>
</html>
